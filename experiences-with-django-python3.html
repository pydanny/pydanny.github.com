<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My experiences with Django and Python 3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Daniel-Greenfeld">

    <!-- Le styles -->
    <link rel="stylesheet" href="./theme/css/pydanny.css" type="text/css" />
    <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css" />
    <link href="./theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="./theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="./theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./theme/images/apple-touch-icon-114x114.png">

    <link href="http://pydanny.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="pydanny ATOM Feed" />
    
  </head>

  <body>

    <div class="pre-navbar">
      <div class="container">
        <div class="row">
          <div class="span6">
            <h1 class="site-logo">
              <a href=".">
              <img src="./theme/img/inside-head-of-pydanny.png" alt="Inside the Head of PyDanny" title="Click to return to Daniel Greenfeld's homepage" />
              </a>
            </h1>
          </div>
          <div class="offset1 span5">
            <p class="about-this-blog">
              Hi, I'm Daniel Greenfeld, and welcome to my blog. I write about Python, Django, and much more.
            </p>
          </div>
        </div>
        <div class="pydanny-cartwheel"></div>
      </div>
    </div>
    <div class="grass"></div>
    <div class="navbar navbar-fixed-top" id="pydanny-navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse">
            <ul class="nav">
                <li><a href=".">Home</a></li>
                <li><a href="./pages/about.html">About</a></li>
                <li><a href="./pages/events.html">Events</a></li>
                <li><a href="./pages/projects.html">Projects</a></li>
                <li><a href="./pages/tools.html">Tools</a></li>
                <li><a href="./category/audrey.html">Audrey</a></li>
                <li><a href="./category/blog.html">Blog</a></li>
                <li><a href="./category/book.html">Book</a></li>
                <li><a href="./category/django.html">Django</a></li>
                <li><a href="./category/python.html">Python</a></li>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="span8" id="content">
            <section id="content">
        <article>
                <header>
                        <h1 class="article-title">
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to My experiences with Django and Python 3">
                                        My experiences with Django and Python 3
                                </a>
                                <a href="http://twitter.com/share" class="twitter-share-button"
   data-count="horizontal" data-via="pydanny">Tweet</a>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js">
</script>
                        </h1>
                </header>

                <p>
                    <em>Thursday, July 11, 2013</em>
                    (<a href="" rel="bookmark" title="Permalink to My experiences with Django and Python 3">permalink</a>)
                </p>

                <div class="entry-content">
                    <p>The following are my notes, observations, and resources on the subject of working with Python 3 (with or without Django).</p>
<p>Recently I've become involved in a couple of Django efforts that used Python 3.3. The quick summary of what I learned is pretty much what I expected: Out of the box Django 1.5 (and the pending 1.6 release) works fine with Python 3.3.2.</p>
<div class="section" id="use-python-3-3-2">
<h2>Use Python 3.3.2!</h2>
<p>Myself and others have encountered problems with using Django 1.5+ and earlier versions of Python 3. The issues can be tricky; for example <tt class="docutils literal">syncdb</tt> fails in curious ways on Python 3.3.0.</p>
<p>The answer, for me, is to use Python 3.3.2 and don't look back.</p>
</div>
<div class="section" id="checking-for-python-3-compatibility">
<h2>Checking for Python 3 Compatibility</h2>
<p>The steps I use are below. They are in rough order:</p>
<ul class="simple">
<li>Look up the package on <a class="reference external" href="https://pypi.python.org/pypi/">PyPI</a> and see if any of it's trove classifiers mention Python 3 status.</li>
<li>See if a pull request for Python 3 support is outstanding.</li>
<li>Run the test suite using Python 3.3</li>
<li>Use <a class="reference external" href="http://docs.python.org/2/library/2to3.html">2to3</a> to scan the code for issues.</li>
<li>If a Django project, check the models for <tt class="docutils literal">__str__()</tt> methods. If it has them, it's a pretty good indicator it's Python 3.3 friendly.</li>
<li>Make a judgement call.</li>
</ul>
</div>
<div class="section" id="important-packages-that-work-with-python-3">
<h2>Important Packages that work with Python 3</h2>
<p>In this section I'm listing a few of the Python and Django packages I'm using that worked without me having to do anything sort of modification or pull request:</p>
<ul class="simple">
<li>Django 1.5 and 1.6 beta</li>
<li>Pillow (drop-in replacement for PIL)</li>
<li>South</li>
<li>django-bootstrap-registration (templates for django-registration)</li>
<li>django-braces</li>
<li>django-crispy-forms</li>
<li>requests</li>
</ul>
</div>
<div class="section" id="conversion-process">
<h2>Conversion process</h2>
<p>How I convert Python 2 code to Python 3:</p>
<ul class="simple">
<li>Use 2to3 until you get used to not using it.</li>
<li>Fix any problems you find in the code. Try to keep solutions as simple as possible.</li>
<li>Submit the pull request.</li>
<li>Politely poke the package owner to accept the pull request.</li>
<li>Once the owner accepts the pull request, gently poke the package owner to push the update to PyPI.</li>
</ul>
</div>
<div class="section" id="packages-that-needed-conversion">
<h2>Packages that needed conversion</h2>
<p>Here are four packages worth noting that had to be converted:</p>
<ul class="simple">
<li>unicode-slugify</li>
<li>django-registration</li>
<li>django-stripe-payments (in progress)</li>
<li>django-nose</li>
</ul>
<p>Let's get into some detail for each package:</p>
<div class="section" id="unicode-slugify">
<h3><a class="reference external" href="https://pypi.python.org/pypi/unicode-slugify">unicode-slugify</a></h3>
<p>This is a handy, more unicode friendly replacement for Django's <cite>django.utils.text.slugify</cite> function. It failed on Django 1.6 beta, so I forked it, submitted a successful pull request after testing it on Python 2.6, 2.7, and Python 3.3.2. The Mozilla team pushed it to PyPI and even gave me <a class="reference external" href="https://badges.mozilla.org/en-US/profiles/profile/pydanny">badges</a> for my efforts!</p>
<p>In the future I would like to see this little package work without the dependency of Django itself, and I've had a couple replacement dependencies suggested.</p>
</div>
<div class="section" id="django-registration">
<h3>django-registration</h3>
<p>With the 1.0 release, it's been updated for Django 1.5, <em>unless</em> you use customized User models or Python 3. I really needed this on PyPI, but the maintainer is very busy. Therefore, I forked the project, renamed it to <a class="reference external" href="https://pypi.python.org/pypi/django-reg">django-reg</a> while referencing the original, and pushed it to PyPI. Not ideal, but sometimes you have to do what you have to do.</p>
<p>Lesson learned: In the future skip these issues and just use <a class="reference external" href="https://pypi.python.org/pypi/django-allauth">django-allauth</a>.</p>
<p><strong>Update 08/08/2013</strong>: All my Python 3 work is now on django-allauth. This way I don't have to do the work of maintaining a compatibility branch.</p>
</div>
<div class="section" id="django-stripe-payments-in-progress">
<h3><a class="reference external" href="https://pypi.python.org/pypi/django-stripe-payments">django-stripe-payments</a> (in progress)</h3>
<p>While django-zebra is better known for handling stripe payments, I prefer to use Eldarion's excellent, well-maintained and tested django-stripe-payments. It was delayed because django-nose wasn't Python 3 compatible, but that's been fixed as of at least 7/28/2013. Unfortunately, it's Travis-CI tests fail with the Django 1.5 era custom user model because of what might be a linter misconfiguration. In theory, the just released version of pylint (1.0) should work without any problems.</p>
<p>Of course, I informed the maintainers of my efforts and problems.</p>
<p><strong>Update 07/30/2013</strong>: Updated the text to reflect the current status of the linter problems I'm having.</p>
<p><strong>Update 08/08/2013</strong>: While django-stripe-payments is useful, it doesn't do everything that I need. I tried extending it's logic into a third app, but that was proving unweildy. Therefore, I forked the project to <a class="reference external" href="https://pypi.python.org/pypi/dj-stripe">dj-stripe</a>, which has the features and compatibility that I need.</p>
</div>
<div class="section" id="django-nose">
<h3><a class="reference external" href="https://pypi.python.org/pypi/django-nose">django-nose</a></h3>
<p>Today, I asked the maintainer to visit an outstanding pull request that adds Python 3 compatibility. It's a good idea to do this since they might already be working on it, or may have observations they want to share.</p>
<p><strong>Update 7/28/2013</strong>: Jeff Balogh pushed a Python 3.3.2+ compatible version up to PyPI a few days ago. Makes everything so much better!</p>
</div>
</div>
<div class="section" id="dealing-with-slow-maintainers">
<h2>Dealing with Slow Maintainers</h2>
<p>For what it's worth, from experience ranting to or about slow-moving maintainers is absolutely counter-productive. People have lives and jobs that sometimes get in the way of open source. It's more productive to be patient, be polite, and if necessary do an absolutely minimal fork or find a working alternative.</p>
</div>
<div class="section" id="handy-resources">
<h2>Handy Resources</h2>
<p>The following are two useful resources on converting Python 2 to Python 3. I don't follow their methods exactly, I just use them as rough guidelines for my own workflow.</p>
<ul class="simple">
<li><a class="reference external" href="http://youtu.be/cJMGvAYYUyY">Porting Django apps to Python 3</a> video by Jacob Kaplan-Moss</li>
<li><a class="reference external" href="http://python3porting.com/">Porting to Python 3</a> book (free HTML or paid PDF, Kindle, ePub) by Lennart Regebro</li>
</ul>
<p>For various Python 3 recipes, I keep my kindle reader open to this priceless gem:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.amazon.com/Python-Cookbook-ebook/dp/B00DQV4GGY/?tag=ihpydanny">Python Cookbook, 3rd Edition</a> book by David Beazley and Brian K. JOnes.</li>
</ul>
</div>
<div class="section" id="closing-thoughts">
<h2>Closing Thoughts</h2>
<p>This blog post makes it seems like I've put in a lot of work getting things to Python 3, but that isn't the case at all. In fact, for the most part the transition has been trivial. There are a few minor hiccups, but nothing that's killing a whole day or destroying a deadline.</p>
<p><strong>Benefit of using Python 3?</strong> I get to call myself a <strong>Python 3 Hipster</strong>.</p>
<p><strong>Downside of using Python 3?</strong> A little bit of extra homework on each project. However, each time I fix something it's done and I've made the world a better place.</p>
</div>

                    <div class="article-info">
                            <footer class="post-info">


Tags:
	<a href="./tag/python.html"><em>python</em></a>
	<a href="./tag/django.html"><em>django</em></a>
	<a href="./tag/python3.html"><em>python3</em></a>
</footer><!-- /.post-info -->                    </div>
                </div><!-- /.entry-content -->
                                <hr/>
                <div class="comments">
                <h3>Comments</h3>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                           var disqus_identifier = "experiences-with-django-python3.html";
                           (function() {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript'; dsq.async = true;
                                dsq.src = 'http://pydanny.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] ||
                                 document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                        </script>
                </div>
                        </article>
</section>
        </div><!--/span-->

        <div class="offset1 span3 sidebar-nav" id="sidebar">
            <ul class="nav nav-list">
</ul>

<h4>Two Scoops of Django</h4>

<p><a href="http://django.2scoops.org">My book</a> about Django best practices is available as an ebook in PDF, Kindle, ePub, and print formats!</p>

<a href="http://django.2scoops.org"><img class="two-scoops-cover-thumb" src="https://s3.amazonaws.com/twoscoops/img/tsd-cover-beta.png" /></a>

<h4 class="nav-header">Follow Me</h4>
    <p class="capitalize"><i class="icon-twitter-sign icon-large"></i> <a href="http://twitter.com/pydanny">twitter</a></p>
    <p class="capitalize"><i class="icon-github-sign icon-large"></i> <a href="https://github.com/pydanny">github</a></p>
    <p class="capitalize"><i class="icon-facebook-sign icon-large"></i> <a href="http://www.facebook.com/daniel.greenfeld">facebook</a></p>
    <p class="capitalize"><i class="icon-gittip icon-large"></i> <a href="https://www.gittip.com/pydanny">gittip</a></p>

<h4>Subscribe To My Feed</h4>

<p>
While you're here, why not add my <a href="./feeds/all.atom.xml" rel="alternate">atom feed</a> to your RSS reader?
</p>

<h4 class="nav-header">Tags</h4>
<span class="tag-3">
    <a href="./tag/sprint.html">
        sprint
    </a>
</span>
<span class="tag-3">
    <a href="./tag/pypi.html">
        pypi
    </a>
</span>
<span class="tag-3">
    <a href="./tag/testing.html">
        testing
    </a>
</span>
<span class="tag-3">
    <a href="./tag/clojure.html">
        clojure
    </a>
</span>
<span class="tag-3">
    <a href="./tag/review.html">
        review
    </a>
</span>
<span class="tag-3">
    <a href="./tag/python3.html">
        python3
    </a>
</span>
<span class="tag-3">
    <a href="./tag/tools.html">
        tools
    </a>
</span>
<span class="tag-4">
    <a href="./tag/paypal.html">
        paypal
    </a>
</span>
<span class="tag-4">
    <a href="./tag/australia.html">
        australia
    </a>
</span>
<span class="tag-4">
    <a href="./tag/los-angeles.html">
        los-angeles
    </a>
</span>
<span class="tag-4">
    <a href="./tag/unicode.html">
        unicode
    </a>
</span>
<span class="tag-3">
    <a href="./tag/capoeira.html">
        capoeira
    </a>
</span>
<span class="tag-4">
    <a href="./tag/science.html">
        science
    </a>
</span>
<span class="tag-4">
    <a href="./tag/lahackthons.html">
        lahackthons
    </a>
</span>
<span class="tag-4">
    <a href="./tag/wsgi.html">
        wsgi
    </a>
</span>
<span class="tag-4">
    <a href="./tag/pyramid.html">
        pyramid
    </a>
</span>
<span class="tag-4">
    <a href="./tag/nasa.html">
        nasa
    </a>
</span>
<span class="tag-4">
    <a href="./tag/los-angeles.html">
        Los Angeles
    </a>
</span>
<span class="tag-4">
    <a href="./tag/i18n.html">
        i18n
    </a>
</span>
<span class="tag-1">
    <a href="./tag/python.html">
        python
    </a>
</span>
<span class="tag-4">
    <a href="./tag/filepicker.html">
        filepicker
    </a>
</span>
<span class="tag-2">
    <a href="./tag/twoscoops.html">
        twoscoops
    </a>
</span>
<span class="tag-4">
    <a href="./tag/djangodash.html">
        djangodash
    </a>
</span>
<span class="tag-2">
    <a href="./tag/djangocon.html">
        djangocon
    </a>
</span>
<span class="tag-3">
    <a href="./tag/philippines.html">
        philippines
    </a>
</span>
<span class="tag-3">
    <a href="./tag/consumernotebook.html">
        consumernotebook
    </a>
</span>
<span class="tag-3">
    <a href="./tag/setup.html">
        setup
    </a>
</span>
<span class="tag-3">
    <a href="./tag/europe.html">
        europe
    </a>
</span>
<span class="tag-3">
    <a href="./tag/meme.html">
        meme
    </a>
</span>
<span class="tag-2">
    <a href="./tag/class-based-views.html">
        class-based-views
    </a>
</span>
<span class="tag-2">
    <a href="./tag/holidays.html">
        holidays
    </a>
</span>
<span class="tag-4">
    <a href="./tag/perl.html">
        perl
    </a>
</span>
<span class="tag-3">
    <a href="./tag/flask.html">
        flask
    </a>
</span>
<span class="tag-4">
    <a href="./tag/gondor.html">
        gondor
    </a>
</span>
<span class="tag-3">
    <a href="./tag/oauth.html">
        OAuth
    </a>
</span>
<span class="tag-2">
    <a href="./tag/family.html">
        family
    </a>
</span>
<span class="tag-2">
    <a href="./tag/book.html">
        book
    </a>
</span>
<span class="tag-3">
    <a href="./tag/forms.html">
        forms
    </a>
</span>
<span class="tag-2">
    <a href="./tag/pycon.html">
        pycon
    </a>
</span>
<span class="tag-2">
    <a href="./tag/blog.html">
        blog
    </a>
</span>
<span class="tag-4">
    <a href="./tag/functions.html">
        functions
    </a>
</span>
<span class="tag-3">
    <a href="./tag/ruby.html">
        ruby
    </a>
</span>
<span class="tag-3">
    <a href="./tag/javascript.html">
        javascript
    </a>
</span>
<span class="tag-2">
    <a href="./tag/friends.html">
        friends
    </a>
</span>
<span class="tag-4">
    <a href="./tag/css.html">
        css
    </a>
</span>
<span class="tag-3">
    <a href="./tag/pypy.html">
        pypy
    </a>
</span>
<span class="tag-3">
    <a href="./tag/ppoftw.html">
        ppoftw
    </a>
</span>
<span class="tag-3">
    <a href="./tag/pycon-2013-guide.html">
        pycon-2013-guide
    </a>
</span>
<span class="tag-3">
    <a href="./tag/mongodb.html">
        mongodb
    </a>
</span>
<span class="tag-3">
    <a href="./tag/php.html">
        php
    </a>
</span>
<span class="tag-4">
    <a href="./tag/dotcloud.html">
        dotcloud
    </a>
</span>
<span class="tag-4">
    <a href="./tag/europython.html">
        europython
    </a>
</span>
<span class="tag-2">
    <a href="./tag/resolutions.html">
        resolutions
    </a>
</span>
<span class="tag-1">
    <a href="./tag/django.html">
        django
    </a>
</span>
<span class="tag-3">
    <a href="./tag/la.html">
        LA
    </a>
</span>
<span class="tag-3">
    <a href="./tag/travel.html">
        travel
    </a>
</span>
<span class="tag-3">
    <a href="./tag/api.html">
        api
    </a>
</span>
<span class="tag-3">
    <a href="./tag/travel-tips-for-geeks.html">
        travel tips for geeks
    </a>
</span>
<span class="tag-4">
    <a href="./tag/vs.html">
        vs
    </a>
</span>
<span class="tag-4">
    <a href="./tag/meteor.html">
        meteor
    </a>
</span>
<span class="tag-3">
    <a href="./tag/heroku.html">
        heroku
    </a>
</span>
<span class="tag-3">
    <a href="./tag/nodejs.html">
        nodejs
    </a>
</span>
<span class="tag-2">
    <a href="./tag/howto.html">
        howto
    </a>
</span>
<span class="tag-4">
    <a href="./tag/casestudy.html">
        casestudy
    </a>
</span>
<span class="tag-4">
    <a href="./tag/lahackathons.html">
        lahackathons
    </a>
</span>
<span class="tag-4">
    <a href="./tag/pyladies.html">
        pyladies
    </a>
</span>
<span class="tag-2">
    <a href="./tag/audrey.html">
        audrey
    </a>
</span>
<span class="tag-4">
    <a href="./tag/rails.html">
        rails
    </a>
</span>
<span class="tag-4">
    <a href="./tag/dsf.html">
        dsf
    </a>
</span>
<span class="tag-3">
    <a href="./tag/consumer-notebook.html">
        Consumer-Notebook
    </a>
</span>
<span class="tag-2">
    <a href="./tag/rant.html">
        rant
    </a>
</span>
<span class="tag-4">
    <a href="./tag/joke.html">
        joke
    </a>
</span>
<span class="tag-4">
    <a href="./tag/usability.html">
        usability
    </a>
</span>
<span class="tag-3">
    <a href="./tag/hackathon.html">
        hackathon
    </a>
</span>
<span class="tag-4">
    <a href="./tag/la.html">
        la
    </a>
</span>


        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">Content Copyright Â© 2013 Daniel Greenfeld. 
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>. Adapted from the <a href="https://github.com/getpelican/pelican-themes/tree/master/bootstrap2">Pelican Bootstrap2</a> theme by <a href="http://www.audreymroy.com">Audrey M. Roy</a>. Support my work by spreading the word about <a href="http://django.2scoops.org">Two Scoops of Django: Best Practices For Django 1.5</a>.
        </address><!-- /#about -->
      </footer>

    </div><!--/.container-->


    <script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
	var pageTracker = _gat._getTracker("UA-18066389-3");
pageTracker._trackPageview();
} catch(err) {}</script>
        <script type="text/javascript">
    var disqus_shortname = 'pydanny';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./theme/js/jquery-1.7.2.min.js"></script>
    <script src="./theme/js/bootstrap.min.js"></script>
  </body>
</html>